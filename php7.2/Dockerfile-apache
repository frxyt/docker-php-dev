FROM php:7.2-apache

LABEL maintainer="Jérémy WALTHER <jeremy@ferox.yt>"

ENV COMPOSER_ALLOW_SUPERUSER=1 \
    FRX_DOCKER_FROM=${FRX_DOCKER_FROM} \
    FRX_PHP_XDEBUG_MAX_NESTING_LEVEL=-1 \
    FRX_PHP_XDEBUG_REMOTE_AUTOSTART=1 \
    FRX_PHP_XDEBUG_REMOTE_CONNECT_BACK=0 \
    FRX_PHP_XDEBUG_REMOTE_ENABLE=1 \
    FRX_PHP_XDEBUG_REMOTE_HOST=host.docker.internal \
    FRX_PHP_XDEBUG_REMOTE_PORT=9000

COPY ./build /frx

RUN /frx/build