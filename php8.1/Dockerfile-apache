FROM php:8.1-apache-bullseye

LABEL maintainer="Jérémy WALTHER <jeremy@ferox.yt>"

ENV COMPOSER_ALLOW_SUPERUSER=1 \
    COMPOSER_DISABLE_XDEBUG_WARN=1 \
    FRX_APACHE_DOCUMENT_ROOT= \
    FRX_APACHE_ENABLE_MOD= \
    FRX_APT_GET_INSTALL= \
    FRX_COMPOSER_VENDOR_CACHE_ENABLE=0 \
    FRX_COMPOSER_VENDOR_CACHE_PATH=vendor \
    FRX_DOCKER_FROM=php:8.0-apache \
    FRX_PECL_INSTALL= \
    FRX_PHP_EXT_CONFIGURE= \
    FRX_PHP_EXT_ENABLE= \
    FRX_PHP_EXT_INSTALL= \
    FRX_PHP_INI= \
    FRX_PHP_XDEBUG_CLIENT_HOST=host.docker.internal \
    FRX_PHP_XDEBUG_CLIENT_PORT=9003 \
    FRX_PHP_XDEBUG_DISCOVER_CLIENT_HOST=false \
    FRX_PHP_XDEBUG_MAX_NESTING_LEVEL=-1 \
    FRX_PHP_XDEBUG_MODE=off \
    FRX_PHP_XDEBUG_START_WITH_REQUEST=default \
    FRX_SCRIPT_START=

COPY ./build ./Dockerfile ./LICENSE ./README.md  /frx/

RUN /frx/build